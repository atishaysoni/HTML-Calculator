<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Calculator</title>
    <!-- for using bootstrap we need to import both the bootstrap.css and bootstrap.js file  -->
    <!-- using bootstrap with dowload not cdn  -->
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.css">
    <!-- using bootstrap icons using cdn  -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="vendor/fontawesome/css/all.css">
    <link rel="icon" href="assets/favicon.ico" type="image/x-icon">

    <style>
        .calc-btn{
            background-color: rgba(22, 22, 156, 0.451);
            border: 4px solid white;
            border-radius: 20px;
            color: white;
            width: 70px;
            height: 60px;
        }
        .calc-display{
            background-color: rgba(34, 53, 160, 0.406);
            border: 4px solid white;
            color: white;
            height: 100px;
            width: 310px;
            border-radius: 5px;
        }
    </style>
</head>
<body style="background-image: url('https://img.freepik.com/free-vector/mathematical-geometric-background-vector-gradient-blue-education-remix_53876-114100.jpg');
background-size: cover; /* or use 'contain' or any other value as per your requirement */
background-position: center;
background-repeat: no-repeat;">
    <div class="container p-5">
        <div class="d-flex justify-content-center">
            <div class="col-sm-12 col-md-4 col-lg-4">
                <div class="card"  style="background-color: rgba(8, 44, 90, 0.463); border: 4px solid white; border-radius: 20px;">
                    <div class="d-flex justify-content-center align-items-center p-3">
                        <div class="row">
                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 calc-display">
                                <div id="number_div" class="inputString"></div>
                                <div id="expression" class="expressionString"></div>
                                <div id="value_div" class="valueString"></div>
                            </div>
                            <input type="hidden" id="savedExpression">
                        </div>
                    </div>
                    <div class="d-flex justify-content-center align-items-center p-3">
                        <div class="row">
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-light calc-btn" data-event-key="NumLock">Num Lock</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-light calc-btn" data-event-key="Delete">CE</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-light calc-btn" data-event-key="Delete">Del</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-light calc-btn" data-event-key="/">/</button>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-center align-items-center p-3">
                        <div class="row">
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-light calc-btn" data-event-key="7">7</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-light calc-btn" data-event-key="8">8</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-light calc-btn" data-event-key="9">9</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-light calc-btn" data-event-key="*">*</button>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-center align-items-center p-3">
                        <div class="row">
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-light calc-btn" data-event-key="4">4</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-light calc-btn" data-event-key="5">5</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-light calc-btn" data-event-key="6">6</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-light calc-btn" data-event-key="-">-</button>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-center align-items-center p-3">
                        <div class="row">
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-light calc-btn" data-event-key="1">1</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-light calc-btn" data-event-key="2">2</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-light calc-btn" data-event-key="3">3</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-light calc-btn" data-event-key="+">+</button>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-center align-items-center p-3">
                        <div class="row">
                            <div class="col-sm-6 col-md-6 col-lg-6 col-xl-6">
                                <button type="button" class="btn btn-light calc-btn" style="width: 150px" data-event-key="0">0</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-light calc-btn" data-event-key=".">.</button>
                            </div>
                            <div class="col-sm-3 col-md-3 col-lg-3 col-xl-3">
                                <button type="button" class="btn btn-light calc-btn" data-event-key="=">=</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- we are including jQuery first because jQuery is our first dependency and it has to be included first before we include bootstrap -->
    <!-- using jquery after downloading it not cdn  -->
    <script src="vendor/jQuery/jquery.js"></script>
    <!-- using popper.js with cdn -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <!-- including bootstrap.js file using download  -->
    <script src="vendor/bootstrap/js/bootstrap.js"></script>
    <script>
        $(document).on('keypress', function(e){
            $('button[data-event-key="' + e.key + '"]').addClass('active')
            if((e.keyCode >= 43 && e.keyCode <= 57) || (e.keyCode >= 96 && e.keyCode <= 105)){
                appendNumber(e.key)
            }else{
                if(e.key == "+" || e.key == "-" || e.key == "/" || e.key == "*"){
                    generatedExpression(e.key)
                }
            }
            console.log(e.key);
        })

        $(document).on('keyup', function(e){
            $('button[data-event-key="' + e.key + '"]').removeClass('active')
            console.log(e.key);
        })


        $('.calc-btn').on('click', function(e){
            var key =  $(this).data('event-key')
            if(key != "+" && key != "-" && key != "." && key != "*" && key != "/" && key != "Delete" && key != "NumLock"){
                appendNumber(key)
            }else{
                if(key == "+" || key == "-" || key == "/" || key == "*"){
                    generatedExpression(key)
                }else if(key == "="){
                    evaluateExpression()
                }else if(key == "Delete"){
                    clearCalc()
                }
            }
            console.log(key)
        })

        function appendNumber(number){
            var existingNumber = $("#number_div").html();
            console.log(existingNumber);
            var currentString = number;
            var outputString = "";
            if(existingNumber != "" && existingNumber != undefined  && existingNumber != null){
                if(existingNumber == "0"){
                    outputString = number
                }else{
                    outputString = existingNumber += currentString
                }
            }else{
                outputString = currentString;
            }
            $("#number_div").html(outputString);
        }


        function generatedExpression(operator){
            var existingNumber = $("#number_div").html();
            var currentOperator = operator;
            var expression = "";
            var savedExpression = $("#savedExpression").val();
            if(savedExpression == "" || savedExpression == null || savedExpression == undefined){
                expression = parseInt(existingNumber) + operator;
            }else{
                expression = savedExpression + existingNumber + operator;
            }
            $("#number_div").html("")
            $("#savedExpression").val(expression)
            $("#expression").html(expression)
        }

        function evaluateExpression(){
            var result = "";
            var expression = $("#savedExpression").val();
            var existingNumber = $("#number_div").html();
            if(existingNumber != "" || existingNumber != null || existingNumber != undefined){
                expression = expression + parseInt(existingNumber);
                $("#expression").html(expression);
            }
            result = eval(expression);
            $("#savedExpression").val("")
            $("#number_div").html(result)
            $("#value_div").html(result)
        }

        function clearCalc(){
            $("#number_div").html("")
            $("#savedExpression").val("")
            $("#expression").html("")
            $("#value_div").html("")
        }
        
    </script>

    
</body>
</html>